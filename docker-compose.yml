version: '3'
services:
  dev:
    container_name: 'announcing-dev'
    stdin_open: true
    tty: true
    ports:
      - '127.0.0.1:5173:5173'
    build:
      context: .
      dockerfile: Dockerfile
    volumes:
      - .:/opt/announcing-dev:delegated
      - node_modules:/opt/announcing-dev/node_modules
      - node_modules:/opt/announcing-dev/packages/viewer/node_modules
    working_dir: /opt/announcing-dev
    command: sh -c './docker-init.sh && bash'
volumes:
  node_modules:
